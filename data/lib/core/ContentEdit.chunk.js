/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[6],{166:function(Aa,ua,r){function pa(Ka,Sa,Ha,Ba){return Object(ba.b)(void 0,void 0,void 0,function(){var La,Ja,Pa,Ua,Qa,Ea,Ga,Va,Wa;return Object(ba.d)(this,function(Za){switch(Za.label){case 0:return La=Ca.getDocument(),Ja=[1],[4,Object(fa.c)(Sa,{extension:"pdf"})];case 1:return Pa=Za.ea(),Ua=Ca.qa(),Ga=(Ea=va.a).uga,[4,Pa.NB()];case 2:return Qa=Ga.apply(Ea,[Za.ea().xfdfString,Ka]),Va=!0,[4,La.Af(Pa,Ja,Ka,Va)];case 3:return Za.ea(),
[4,La.lg([Ka+1],Va)];case 4:return Za.ea(),Wa=Ua.qb().filter(function(gb){return gb.$J()&&gb.PageNumber===Ka}),Ua.Ah(Wa,{force:!0,source:"contentEditTool"}),[4,Ua.IJ(Qa)];case 5:return Za.ea(),Ca.getDocument().sL(),Ca.rL(Ka),Ca.Ue(),ha(Ka),f(Ka,Ha.galleys,Ba),f(Ka,Ha.objects,Ba),[2]}})})}function ka(Ka){Ka=(new DOMParser).parseFromString(Ka,"text/html").documentElement.querySelector("body");Ka.querySelectorAll("p").forEach(function(Sa){Sa.querySelectorAll("span").forEach(function(La){var Ja=La.getAttribute("style");
Ja=ma(Ja,La.innerHTML);La.innerHTML=Ja});var Ha=Sa.getAttribute("style"),Ba=Sa.innerHTML.replaceAll("<br>","");Sa.innerHTML=ma(Ha,Ba)});return Ka.innerHTML.trim()}function ma(Ka,Sa){Ka.includes("bold")&&(Sa="<strong>"+Sa+"</strong>");Ka.includes("italic")&&(Sa="<em>"+Sa+"</em>");Ka.includes("text-decoration: underline")&&(Sa="<u>"+Sa+"</u>");return Sa}function ha(Ka){var Sa=Ca.qa(),Ha=Sa.qb().filter(function(Ba){return Ba.Lh()&&Ba.PageNumber===Ka});Sa.Ah(Ha,{force:!0,source:"contentEditTool"})}function da(Ka,
Sa){Sa.forEach(function(Ha){Ia[Ka]||(Ia[Ka]=[]);Ia[Ka].find(function(Ba){return Ba.id===Ha.id})||Ia[Ka].push(Ha)})}function aa(Ka,Sa){Sa.forEach(function(Ha){Da[Ka]||(Da[Ka]=[]);Da[Ka].find(function(Ba){return Ba.id===Ha.id})||Da[Ka].push(Ha)})}function x(Ka){var Sa=new DOMParser,Ha=Sa.parseFromString(Ka,"text/xml");Ha.querySelector("parsererror")&&(Ha=Sa.parseFromString("<Root>"+Ka+"</Root>","text/xml"));Ha.querySelectorAll("a").forEach(function(Ba){var La=Ba.childNodes[0];Array.from(Ba.querySelectorAll("*")).find(function(Ja){return"u"===
Ja.tagName.toLowerCase()})||(Ba=document.createElement("u"),La.after(Ba),Ba.appendChild(La))});return(new XMLSerializer).serializeToString(Ha)}function y(Ka,Sa,Ha,Ba){this.top=Ka;this.left=Sa;this.bottom=Ha;this.right=Ba;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};
this.width=function(){return Math.round(this.right-this.left)};this.OQ=function(La){return this.topVal()!==La.topVal()||this.leftVal()!==La.leftVal()||this.bottomVal()!==La.bottomVal()||this.rightVal()!==La.rightVal()}}function h(Ka,Sa,Ha,Ba,La){this.id=Ka;this.pagenum=Sa;this.galleysContents=Ha;this.contents=Ba;this.galleyBox=La}function e(Ka,Sa,Ha,Ba){this.id=Sa;this.type=Ka;this.bbox=Ha;this.pagenum=Ba}function b(Ka,Sa,Ha,Ba,La){this.id=Ka;this.pagecount=Sa;this.pageBBox=Ha;this.galleys=Ba;this.objects=
La}function a(Ka,Sa,Ha,Ba,La){var Ja=[];(new DOMParser).parseFromString(Ba,"text/html").documentElement.querySelectorAll("p").forEach(function(Ea,Ga){Ja[Ga]=Ea.innerHTML});Ha=(new DOMParser).parseFromString(Ha,"text/html");var Pa=null;Ha.documentElement.querySelectorAll("p").forEach(function(Ea,Ga){Ga<Ja.length?(Ea.innerHTML=Ja[Ga],Pa=Ea.getAttribute("style"),Pa=Pa.replace("font:italic","font:normal"),Pa=Pa.replace(" bold "," normal "),Pa=Pa.replace("underline:1;","underline:0;"),Ea.setAttribute("style",
Pa)):Ea.remove()});for(Ba=Ha.documentElement.querySelectorAll("p").length;Ba<Ja.length;Ba++){var Ua=document.createElement("p");Ua.setAttribute("id","0");Ua.innerHTML=Ja[Ba];null!=Pa&&Ua.setAttribute("style",Pa);Ha.documentElement.querySelector("body").appendChild(Ua)}Ha=Ha.documentElement.querySelector("body").innerHTML;var Qa="";Da[Ka].forEach(function(Ea){Ea.id===La&&(Qa=Ea)});if(""===Qa)return"";Sa="<DOC id='"+Sa.id+"' pagecount='"+Sa.pagecount+"'>";Sa=Sa+("<STORY galley_ids='"+La+"' pagenum='"+
Ka+"'><galleys>")+(Qa.galleysContents+"</galleys>");Qa.contents=Ha;Sa=Sa+Ha+"\n</STORY>";return Sa+="</DOC>"}function f(Ka,Sa,Ha){var Ba=[],La=Ca.getDocument(),Ja=null;Sa.forEach(function(Pa){if(Pa instanceof e){var Ua=La.Kn(Ka,Pa.bbox.leftVal(),Pa.bbox.topVal());var Qa=Ua.x;var Ea=Ua.y;var Ga=La.Kn(Ka,Pa.bbox.rightVal(),Pa.bbox.bottomVal());Ua=Ga.x;Ga=Ga.y}else if(Pa instanceof h)Ua=La.Kn(Ka,Pa.galleyBox.leftVal(),Pa.galleyBox.topVal()),Qa=Ua.x,Ea=Ua.y,Ga=La.Kn(Ka,Pa.galleyBox.rightVal(),Pa.galleyBox.bottomVal()),
Ua=Ga.x,Ga=Ga.y;else return;var Va=new window.Core.Annotations.RectangleAnnotation,Wa=ta.a.OBJECT;Pa instanceof h&&(Wa=ta.a.TEXT);Va.$ia(Pa,Wa);Va.PageNumber=Pa.pagenum;Va.X=Qa;Va.Y=Ea;Va.Width=Ua-Qa;Va.Height=Ga-Ea;Va.StrokeColor=new ia.a("#3183C8");Va.FillColor=new ia.a(255,255,255,.01);Va.Style="dash";Va.Dashes="4,3";Va.yB();Va.selectionModel=la.a;Ba.push(Va);"undefined"!==typeof Ha&&Ha===Pa.id&&(Ja=Va)});Sa=Ca.qa();Sa.Fg(Ba);Ja&&Sa.ih(Ja);Sa.ce(Ba)}function n(Ka,Sa,Ha){return Object(ba.b)(this,
void 0,void 0,function(){var Ba,La,Ja,Pa,Ua;return Object(ba.d)(this,function(Qa){switch(Qa.label){case 0:Ba=Ka.data;Ja=Ba.cmd;switch(Ja){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "exportFile":return[3,4];case "importText":return[3,5];case "transformObject":return[3,5];case "deleteObject":return[3,6]}return[3,7];case 1:return[4,Object(ra.b)()];case 2:return Pa=Qa.ea(),oa.postMessage({cmd:"initialiseInfixServer",l:Pa}),[3,7];case 3:return(Ua=z(Ba.resultsXML))?Sa():Ha("License key does not have content edit permission"),
[3,7];case 4:return Ba.exportPerformed?w(Ba.pageNumber,Ba.exportXML,Ba.objectXML,Ba.resultsXML):(La=Ma[Ba.pageNumber],aa(Ba.pageNumber,La.galleys),da(Ba.pageNumber,La.objects),ha(Ba.pageNumber),f(Ba.pageNumber,La.galleys),f(Ba.pageNumber,La.objects)),[3,7];case 5:return La=Ma[Ba.pageNumber],ca(Ba.pageNumber,Ba.resultsXML),pa(Ba.pageNumber,Ba.pdfBuffer,La,Ba.id),[3,7];case 6:return La=Ma[Ba.pageNumber],ca(Ba.pageNumber,Ba.resultsXML),La.galleys=La.galleys.filter(function(Ea){return Ea.id!==Ba.id}),
La.objects=La.objects.filter(function(Ea){return Ea.id!==Ba.id}),pa(Ba.pageNumber,Ba.pdfBuffer,La),[3,7];case 7:return[2]}})})}function z(Ka){Ka=new Uint8Array(Ka);var Sa=(new TextDecoder("utf-8")).decode(Ka);Ka=!1;Sa=(new DOMParser).parseFromString(Sa,"text/xml").getElementsByTagName("LicenseCheck");null!==Sa&&0<Sa.length&&(Sa=Sa[0].getElementsByTagName("Status")[0].innerHTML,"error"!==Sa&&"ok"===Sa&&(Ka=!0));return Ka}function w(Ka,Sa,Ha,Ba){var La=new Uint8Array(Sa),Ja=new TextDecoder("utf-8");
Sa=Ja.decode(La);La=new Uint8Array(Ha);Ha=Ja.decode(La);La=new Uint8Array(Ba);Ba=Ja.decode(La);Ma[Ka]=ja(Ka,Sa,Ha,Ba);Ba=Ma[Ka];aa(Ka,Ba.galleys);da(Ka,Ba.objects);ha(Ka);f(Ka,Ba.galleys);f(Ka,Ba.objects)}function ea(Ka,Sa){Ka=parseFloat(Ka);return isNaN(Sa)||Sa<Ka?Ka:Sa}function ja(Ka,Sa,Ha,Ba){var La;var Ja=new DOMParser;Ba=Ja.parseFromString(Ba,"text/xml");Array.prototype.slice.call(Ba.getElementsByTagName("BBox")).forEach(function(Qa){if("CropBox"===Qa.getAttribute("Name")){var Ea=parseFloat(Qa.getElementsByTagName("Top").item(0).innerHTML),
Ga=parseFloat(Qa.getElementsByTagName("Bottom").item(0).innerHTML),Va=parseFloat(Qa.getElementsByTagName("Left").item(0).innerHTML);Qa=parseFloat(Qa.getElementsByTagName("Right").item(0).innerHTML);La=new y(Ea,Va,Ga,Qa)}});Ja=new DOMParser;Ba=Ja.parseFromString(Sa,"text/xml");var Pa=[];Array.prototype.slice.call(Ba.getElementsByTagName("STORY")).forEach(function(Qa){var Ea=Qa.getAttribute("galley_ids"),Ga=Array.prototype.slice.call(Qa.getElementsByTagName("g"))[0],Va=Ga.getAttribute("bbox").split(" ");
Va=new y(parseFloat(Va[0]),parseFloat(Va[1]),parseFloat(Va[2]),parseFloat(Va[3]));Ga=Ga.innerHTML;var Wa=Array.prototype.slice.call(Qa.getElementsByTagName("galleys"))[0];Wa.parentNode.removeChild(Wa);Qa=Qa.innerHTML;Qa=(new DOMParser).parseFromString(Qa,"text/html").documentElement.querySelector("body").innerHTML.trim();Ea=new h(Ea,Ka,Ga,Qa,Va);Pa.push(Ea)});Ja=new DOMParser;var Ua=[];Sa=Ja.parseFromString(Ha,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(Sa).forEach(function(Qa){var Ea=
Qa.getAttribute("Type"),Ga=Qa.getAttribute("OID");Qa=Array.prototype.slice.call(Qa.getElementsByTagName("Point"));var Va=Number.NaN,Wa=Number.NaN,Za=Number.NaN,gb=Number.NaN;Qa.forEach(function(eb){var hb=eb.getAttribute("Name");"TL"===hb?(Va=ea(eb.getAttribute("Y"),Va),Za=ea(eb.getAttribute("X"),Za)):"TR"===hb?(Va=ea(eb.getAttribute("Y"),Va),gb=ea(eb.getAttribute("X"),gb)):"BR"===hb?(Wa=ea(eb.getAttribute("Y"),Wa),gb=ea(eb.getAttribute("X"),gb)):"BL"===hb&&(Wa=ea(eb.getAttribute("Y"),Wa),Za=ea(eb.getAttribute("X"),
Za))});Qa=new y(Va,Za,Wa,gb);Ea=new e(Ea,Ga,Qa,Ka);Ua.push(Ea)});Sa=Array.prototype.slice.call(Ba.getElementsByTagName("DOC"))[0].getAttribute("id");return new b(Sa,1,La,Pa,Ua)}function ca(Ka,Sa){var Ha;Sa=(new TextDecoder("utf-8")).decode(Sa);var Ba=(new DOMParser).parseFromString(Sa,"text/xml");Sa=Ba.getElementsByTagName("Galley").item(0);if(null!=Sa){var La=Sa.getAttribute("id");Sa=Ba.getElementsByTagName("BBox");Sa=Array.prototype.slice.call(Sa);Sa.forEach(function(Ua){var Qa=Ua.getElementsByTagName("Top"),
Ea=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Left");var Ga=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Bottom");var Va=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Right");Ua=parseFloat(Qa.item(0).innerHTML);Ha=new y(Ea,Ga,Va,Ua)});Da[Ka].forEach(function(Ua){Ua.id===La&&!0===Ha.OQ(Ua.galleyBox)&&(Ua.galleyBox=Ha)})}Sa=Ba.getElementsByTagName("Object").item(0);if(null!=Sa){var Ja=Sa.getAttribute("OID");Sa=Ba.getElementsByTagName("BBox");Sa=Array.prototype.slice.call(Sa);
Sa.forEach(function(Ua){var Qa=Ua.getElementsByTagName("Top"),Ea=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Left");var Ga=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Bottom");var Va=parseFloat(Qa.item(0).innerHTML);Qa=Ua.getElementsByTagName("Right");Ua=parseFloat(Qa.item(0).innerHTML);Ha=new y(Ea,Ga,Va,Ua)});Ia[Ka].forEach(function(Ua){Ua.id===Ja&&!0===Ha.OQ(Ua.bbox)&&(Ua.bbox=Ha)})}Sa=Ba.getElementsByTagName("NewParas").item(0);if(null!=Sa){var Pa=Sa.getAttribute("id");
Da[Ka].forEach(function(Ua){if(Ua.id===Pa){var Qa="<Contents>"+Ua.contents;Qa+="</Contents>";var Ea=Array.prototype.slice.call(Ba.getElementsByTagName("NewPara"));Qa=(new DOMParser).parseFromString(Qa,"text/xml");var Ga=Array.prototype.slice.call(Qa.getElementsByTagName("p"));Ea.forEach(function(Va){var Wa=parseFloat(Va.innerHTML),Za=!1;Ga.forEach(function(gb){var eb=gb.getAttribute("id");!1===Za&&"0"===eb&&(gb.setAttribute("id",Wa),Za=!0)})});Ua.contents=Qa.getElementsByTagName("Contents").item(0).innerHTML}})}}
r.r(ua);var ba=r(1),fa=r(55),ia=r(7),la=r(470),na=r(37),ra=r(76),qa=r(2),ta=r(175),va=r(6),oa=null,wa=null,Da={},Ia={},Ma={},Ca;ua["default"]={qga:function(Ka){return Object(ba.b)(void 0,void 0,void 0,function(){return Object(ba.d)(this,function(){wa||(Ca=Ka,wa=new Promise(function(Sa,Ha){oa=new Worker(window.Core.getWorkerPath()+"contentEdit/InfixServerModule.js");oa.onmessage=function(Ba){n(Ba,Sa,Ha)};oa.postMessage({cmd:"isReady"})}));return[2,wa]})})},sga:function(Ka,Sa,Ha){return Object(ba.b)(void 0,
void 0,void 0,function(){var Ba,La,Ja,Pa;return Object(ba.d)(this,function(Ua){switch(Ua.label){case 0:return ha(Sa),Da[Sa]=[],Ia[Sa]=[],[4,Ka.Ge([Sa])];case 1:return Ba=Ua.ea(),La=new TextEncoder,Ja=La.encode(""),Pa=Ja.buffer,oa.postMessage({cmd:"exportFile",pageNumber:Sa,performExport:Ha,pdfFile:Ba,tableData:Pa},[Ba,Pa]),[2]}})})},i7:function(Ka){return Object(ba.b)(void 0,void 0,void 0,function(){var Sa,Ha,Ba,La,Ja,Pa,Ua,Qa;return Object(ba.d)(this,function(Ea){switch(Ea.label){case 0:return Sa=
Ka.id,Ha=Ka.isText,Ba=Ka.pageNumber,La=Ca.getDocument(),[4,La.Ge([Ba])];case 1:return Ja=Ea.ea(),Pa=new TextEncoder,Ua=Pa.encode(""),Qa=Ua.buffer,oa.postMessage({cmd:"deleteObject",pdfFile:Ja,pageNumber:Ba,objectID:Sa,isText:Ha,tableData:Qa},[Qa]),[2]}})})},Jla:function(Ka){return Object(ba.b)(void 0,void 0,void 0,function(){var Sa,Ha,Ba,La,Ja,Pa,Ua,Qa,Ea,Ga,Va,Wa,Za;return Object(ba.d)(this,function(gb){switch(gb.label){case 0:return Sa=Ka.id,Ha=Ka.position,Ba=Ha.top,La=Ha.left,Ja=Ha.bottom,Pa=Ha.right,
Ua=Ka.isText,Qa=Ka.pageNumber,Ea=Ca.getDocument(),[4,Ea.Ge([Qa])];case 1:return Ga=gb.ea(),Va=new TextEncoder,Wa=Va.encode(""),Za=Wa.buffer,oa.postMessage({cmd:"transformObject",pdfFile:Ga,pageNumber:Qa,objectID:Sa,isText:Ua,topVal:Ba,leftVal:La,bottomVal:Ja,rightVal:Pa,tableData:Za},[Za]),[2]}})})},ama:function(Ka,Sa){return Object(ba.b)(void 0,void 0,void 0,function(){var Ha,Ba,La,Ja,Pa,Ua,Qa,Ea,Ga,Va,Wa,Za,gb,eb,hb,mb;return Object(ba.d)(this,function(yb){switch(yb.label){case 0:Ha=Sa.replaceAll("<p><br></p>",
"");Ba=x(Ha);Ba=Ba.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");La=Ka.Du.id;Ja=Ka.PageNumber;Pa=Ma[Ja];Ua=Pa.galleys.find(function(rb){return rb.id===La});Qa=ka(Ua.contents);Ea=a(Ja,Pa,Qa,Ba,La);if(""===Ea)return[3,2];Ga=new TextEncoder;Va=Ga.encode(Ea);Wa=Va.buffer;Za=Object(na.c)()||"https://www.pdftron.com/webfonts/v2/";gb=Ca.getDocument();return[4,gb.Ge([Ja])];case 1:return eb=yb.ea(),Ga=new TextEncoder,hb=Ga.encode(""),mb=hb.buffer,oa.postMessage({cmd:"importText",
pdfFile:eb,pageNumber:Ja,webFontURL:Za,galleyId:La,importData:Wa,tableData:mb},[Wa,mb]),[3,3];case 2:Object(qa.g)("Unable to generate import XML"),yb.label=3;case 3:return[2]}})})},waa:function(Ka){if(Ka)return ka(Ka.contents);Object(qa.g)("Unable to extract document content")}}},470:function(Aa,ua,r){var pa=r(1);Aa=r(82);var ka=r(48);r=function(ma){function ha(){return null!==ma&&ma.apply(this,arguments)||this}Object(pa.c)(ha,ma);ha.prototype.testSelection=function(da,aa,x){return ka.a.al(da,aa,
x)};return ha}(Aa.a);ua.a=r}}]);}).call(this || window)
